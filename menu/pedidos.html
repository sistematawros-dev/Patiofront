<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos - Tawros</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/figma-tokens.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/modals.css">
    <link rel="stylesheet" href="styles/pedidos-figma.css">
    <link rel="stylesheet" href="styles/pedidos-grid.css">
    <link rel="stylesheet" href="styles/pedidos-detalhes-drawer.css">
    <link rel="stylesheet" href="styles/planejar-item-modal.css">
    <link rel="stylesheet" href="styles/cancelar-pedido-modal.css">

</head>
<body>
    <!-- Sidebar Component - Reutilizável -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
            <!-- Logo Container -->
            <div class="logo-container">
                <!-- Ícone (sempre visível) -->
                <svg class="logo-icon" width="32" height="32" viewBox="0 0 193 151" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_compact)">
                    <path d="M133.359 129.405V131.626C133.359 136.91 124.699 150.998 96.5001 150.998C68.3008 150.998 59.641 136.908 59.641 131.626V129.425L89.3823 116.896L103.627 116.907L133.357 129.407L133.359 129.405ZM106.661 69.2949H86.3467L60.1289 121.472L83.4862 111.738L88.2631 101.068L90.2781 96.5932L96.5076 82.7189L97.0272 83.8889L102.741 96.6043L104.752 101.08L109.529 111.749L132.875 121.455L106.665 69.2949H106.661ZM96.9098 37.551C54.5755 37.551 18.1056 22.3003 1.57749 0.34787C1.03183 -0.377555 -0.13212 0.122802 0.0131409 1.01749C6.48658 41.4199 47.4018 61.769 96.9098 61.769C146.418 61.769 184.363 40.6387 192.976 2.14097C193.179 1.22954 192.017 0.665941 191.438 1.39881C174.546 22.784 138.566 37.551 96.908 37.551H96.9098ZM28.773 52.5617C28.6668 52.4985 28.5644 52.4334 28.4583 52.3701L32.7509 69.6446C33.8665 74.1329 35.8405 78.3645 38.5614 82.107L58.0729 108.924L78.7224 67.831C59.5777 65.8444 42.5467 60.666 28.773 52.5617ZM163.184 52.3925C149.399 60.5898 132.726 65.824 114.283 67.8273L134.931 108.918L154.437 82.107C157.16 78.3664 159.132 74.1348 160.247 69.6464L164.777 51.4196C164.25 51.747 163.719 52.0725 163.181 52.3925H163.184Z" fill="url(#paint0_linear_compact)"/>
                </g>
                <defs>
                    <linearGradient id="paint0_linear_compact" x1="96.5001" y1="151" x2="96.5001" y2="3.71337e-05" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#0B3C49"/>
                        <stop offset="0.31" stop-color="#0B3240"/>
                        <stop offset="0.83" stop-color="#0E1928"/>
                        <stop offset="0.99" stop-color="#0F1020"/>
                    </linearGradient>
                    <clipPath id="clip0_compact">
                        <rect width="193" height="151" fill="white"/>
                    </clipPath>
                </defs>
                </svg>

                <!-- Texto TAWROS (anima com o sidebar) -->
                <svg class="logo-text" xmlns="http://www.w3.org/2000/svg" width="150" height="23" viewBox="0 0 189 23" fill="none">
                    <g>
                        <path d="M35.1538 5.02016H54.9317L56.0636 9.20912H42.8277L48.4121 10.8599V21.3832H42.8277V9.20912H36.2847L35.1538 5.02016Z" fill="url(#paint0_linear_text)"/>
                        <path d="M87.4086 6.20828L90.5914 15.7763L93.7834 5.02016H99.5046L102.742 15.8199L105.948 6.20731C106.184 5.50026 106.87 5.02016 107.647 5.02016H111.975L106.025 21.3832H100.496C100.031 21.3832 99.6231 21.0903 99.4924 20.6635L96.5203 10.9326L93.5706 20.6626C93.4409 21.0903 93.0315 21.3842 92.5664 21.3842H87.1289L81.1787 5.02113H85.7113C86.4875 5.02113 87.1745 5.5022 87.4096 6.20925L87.4086 6.20828Z" fill="url(#paint1_linear_text)"/>
                        <path d="M116.703 5.02792H131.89C135.605 5.02792 137.84 7.16653 137.84 10.374C137.84 13.3855 135.605 15.0207 132.255 15.2389L138.227 21.391H131.434L124.002 12.1411V21.391H118.417V7.64469L116.702 5.02889L116.703 5.02792ZM132.14 10.4176C132.14 9.13056 131.228 8.6718 129.267 8.6718H123.131L124.002 9.54955V12.1401H129.426C131.272 12.1401 132.139 11.66 132.139 10.4157L132.14 10.4176Z" fill="url(#paint2_linear_text)"/>
                        <path d="M179.404 4.47411C182.094 4.47411 184.335 4.7515 186.206 5.10648C187.178 5.28979 187.892 6.08704 187.94 7.03365L188.065 9.47002C185.511 8.68441 182.777 8.22662 179.972 8.22662C177.168 8.22662 176.097 8.70672 176.097 9.535C176.097 12.2846 188.999 9.18584 188.999 16.364C188.999 19.9856 185.739 21.8837 179.95 21.8837C176.93 21.8837 174.215 21.3939 171.791 20.5908C170.962 20.3163 170.394 19.5831 170.35 18.7451L170.194 15.818C172.861 17.1263 175.915 17.8916 179.266 17.8916C181.956 17.8916 183.05 17.3465 183.05 16.4726C183.05 13.5707 170.194 16.6036 170.216 9.44674C170.238 6.06473 173.317 4.47217 179.402 4.47217L179.404 4.47411Z" fill="url(#paint3_linear_text)"/>
                        <path d="M164.734 12.7492C164.731 12.6852 164.729 12.6212 164.725 12.5582C164.722 12.5038 164.717 12.4505 164.712 12.3972C164.708 12.3467 164.705 12.2953 164.699 12.2449C164.693 12.1857 164.686 12.1266 164.679 12.0674C164.674 12.0237 164.67 11.9801 164.664 11.9365C164.656 11.8734 164.646 11.8113 164.637 11.7483C164.631 11.7105 164.625 11.6726 164.619 11.6348C164.608 11.5689 164.596 11.5039 164.584 11.4389C164.578 11.405 164.572 11.372 164.565 11.338C164.552 11.2711 164.536 11.2042 164.521 11.1382C164.514 11.1082 164.508 11.0771 164.501 11.0471C164.485 10.9792 164.467 10.9132 164.45 10.8463C164.443 10.8182 164.436 10.7891 164.428 10.7609C164.41 10.6931 164.389 10.6271 164.369 10.5602C164.361 10.534 164.353 10.5068 164.345 10.4806C164.324 10.4137 164.301 10.3478 164.279 10.2828C164.27 10.2566 164.262 10.2314 164.253 10.2052C164.229 10.1402 164.205 10.0762 164.181 10.0122C164.171 9.986 164.16 9.95981 164.15 9.9346C164.125 9.87155 164.1 9.80948 164.072 9.74838C164.061 9.72122 164.049 9.69503 164.038 9.66788C164.011 9.60774 163.984 9.54955 163.956 9.49039C163.943 9.46226 163.928 9.43413 163.915 9.40601C163.888 9.34975 163.859 9.29447 163.83 9.23918C163.814 9.20912 163.798 9.17808 163.781 9.14801C163.753 9.09661 163.725 9.04521 163.696 8.99477C163.678 8.96374 163.66 8.93173 163.642 8.90069C162.208 9.86088 160.48 10.5621 158.561 10.9898C158.496 11.0073 158.431 11.0257 158.366 11.0422C158.381 11.0781 158.396 11.1159 158.41 11.1528C158.403 11.1547 158.396 11.1557 158.389 11.1576C158.639 11.7493 158.772 12.433 158.772 13.2012C158.772 16.0818 156.97 17.783 153.826 17.783C150.681 17.783 148.88 16.0818 148.88 13.2012C148.88 12.433 149.011 11.7493 149.263 11.1576C149.255 11.1557 149.248 11.1547 149.241 11.1528C149.254 11.1188 149.268 11.0839 149.282 11.0509C147.256 10.6475 145.441 9.96078 143.957 8.99186C143.957 8.99186 143.956 8.9938 143.955 8.99477C143.925 9.04521 143.897 9.09661 143.87 9.14801C143.853 9.17808 143.837 9.20912 143.821 9.23918C143.793 9.29447 143.764 9.34975 143.736 9.40601C143.722 9.43413 143.709 9.46226 143.695 9.49039C143.667 9.54955 143.64 9.60871 143.613 9.66788C143.601 9.69406 143.59 9.72122 143.579 9.74741C143.553 9.80948 143.526 9.87155 143.501 9.93363C143.491 9.95981 143.481 9.98503 143.47 10.0112C143.446 10.0752 143.422 10.1392 143.399 10.2042C143.389 10.2304 143.38 10.2556 143.372 10.2818C143.35 10.3478 143.328 10.4137 143.306 10.4797C143.298 10.5059 143.29 10.533 143.282 10.5592C143.262 10.6261 143.241 10.6931 143.223 10.76C143.215 10.7881 143.208 10.8162 143.201 10.8444C143.184 10.9113 143.165 10.9782 143.149 11.0461C143.142 11.0762 143.136 11.1072 143.129 11.1373C143.114 11.2032 143.1 11.2701 143.085 11.3371C143.078 11.37 143.073 11.404 143.066 11.4379C143.054 11.5029 143.042 11.5679 143.031 11.6338C143.025 11.6717 143.02 11.7095 143.013 11.7473C143.004 11.8094 142.994 11.8724 142.986 11.9355C142.98 11.9791 142.976 12.0228 142.971 12.0664C142.964 12.1256 142.957 12.1838 142.951 12.2439C142.946 12.2943 142.943 12.3448 142.938 12.3962C142.934 12.4495 142.929 12.5029 142.925 12.5572C142.921 12.6202 142.919 12.6852 142.916 12.7483C142.914 12.7909 142.911 12.8326 142.91 12.8753C142.907 12.983 142.905 13.0906 142.905 13.2002C142.905 18.5026 146.849 21.8837 153.824 21.8837C160.798 21.8837 164.742 18.5026 164.742 13.2002C164.742 13.0916 164.74 12.983 164.737 12.8753C164.736 12.8326 164.733 12.7909 164.731 12.7483L164.734 12.7492Z" fill="url(#paint4_linear_text)"/>
                        <path d="M153.885 8.14902C156.798 8.14902 159.517 7.66602 161.821 6.83191C159.966 5.36447 157.265 4.53909 153.825 4.53909C150.385 4.53909 147.721 5.35283 145.866 6.80088C148.188 7.65341 150.937 8.14805 153.885 8.14805V8.14902Z" fill="url(#paint5_linear_text)"/>
                        <path d="M75.3654 12.0994L73.5587 8.64173L71.6547 4.99785H62.2035L63.687 7.25964L56.3586 21.3599L63.919 18.1787L63.9423 18.169L65.1938 15.4601L64.9414 17.9585C66.4705 17.9585 67.9936 18.0574 69.5024 18.2514C71.53 18.5123 73.5303 18.9468 75.4779 19.5501C76.6149 19.9022 77.7336 20.3124 78.83 20.779L80.202 21.3628L75.3634 12.1013L75.3654 12.0994ZM65.4765 14.8578L66.123 13.4689L68.1212 9.16451L69.5044 12.1683L70.7427 14.8578H65.4765Z" fill="url(#paint6_linear_text)"/>
                    </g>
                    <defs>
                        <linearGradient id="paint0_linear_text" x1="45.6082" y1="21.3832" x2="45.6082" y2="5.02016" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint1_linear_text" x1="96.5761" y1="21.3832" x2="96.5761" y2="2.70937e-06" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint2_linear_text" x1="127.464" y1="21.391" x2="127.464" y2="5.02792" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint3_linear_text" x1="179.597" y1="21.8846" x2="179.597" y2="4.47314" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint4_linear_text" x1="153.826" y1="21.8846" x2="153.826" y2="8.90166" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint5_linear_text" x1="153.843" y1="8.14902" x2="153.843" y2="4.54006" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                        <linearGradient id="paint6_linear_text" x1="68.2813" y1="21.3609" x2="68.2813" y2="4.99688" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#0B3C49"/>
                            <stop offset="0.31" stop-color="#0B3240"/>
                            <stop offset="0.83" stop-color="#0E1928"/>
                            <stop offset="0.99" stop-color="#0F1020"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
        </div>

    <div class="search-container">
        <i data-lucide="search" class="search-icon"></i>
        <input type="text" class="search-input" placeholder="Pesquisar">
    </div>

    <!-- Botão de busca quando colapsado -->
    <button class="search-button-collapsed">
        <i data-lucide="search"></i>
    </button>

    <nav class="sidebar-nav">
        <a href="./index.html" class="nav-item">
            <i data-lucide="house" class="nav-icon"></i>
            <span class="nav-text">Painel</span>
        </a>

        <div class="nav-group">
            <button class="nav-item nav-dropdown">
                <div class="nav-item-content">
                    <i data-lucide="list" class="nav-icon"></i>
                    <span class="nav-text">Cadastros</span>
                </div>
                <i data-lucide="chevron-down" class="dropdown-arrow"></i>
            </button>
            <div class="nav-submenu">
                <div class="nav-subgroup">
                    <button class="nav-subitem nav-subdropdown">
                        <span>Pessoas e Empresas</span>
                        <i data-lucide="chevron-down" class="subdropdown-arrow"></i>
                    </button>
                    <div class="nav-subsubmenu">
                        <a href="./pessoas-empresas.html" class="nav-subsubitem">Pessoas e Empresas</a>
                        <a href="./grupo-empresa.html" class="nav-subsubitem">Grupo de Empresa</a>
                        <a href="#categoria" class="nav-subsubitem">Categoria</a>
                        <a href="#setor" class="nav-subsubitem">Setor</a>
                        <a href="#ramo" class="nav-subsubitem">Ramo</a>
                    </div>
                </div>

                <div class="nav-subgroup">
                    <button class="nav-subitem nav-subdropdown">
                        <span>Produtos e Serviços</span>
                        <i data-lucide="chevron-down" class="subdropdown-arrow"></i>
                    </button>
                    <div class="nav-subsubmenu">
                        <a href="./produtos-servicos.html" class="nav-subsubitem">Produtos e Serviços</a>
                        <a href="./classificacao.html" class="nav-subsubitem">Classificação</a>
                        <a href="#unidades-medida" class="nav-subsubitem">Unidades de Medida</a>
                        <a href="#complementares" class="nav-subsubitem">Complementares</a>
                    </div>
                </div>
            </div>
        </div>

        <a href="#" class="nav-item">
            <i data-lucide="chart-no-axes-combined" class="nav-icon"></i>
            <span class="nav-text">BI e Relatórios</span>
        </a>

        <div class="nav-group">
            <button class="nav-item nav-dropdown">
                <div class="nav-item-content">
                    <i data-lucide="sprout" class="nav-icon"></i>
                    <span class="nav-text">Estufas</span>
                </div>
                <i data-lucide="chevron-down" class="dropdown-arrow"></i>
            </button>
            <div class="nav-submenu">
                <a href="#agenda-eventos" class="nav-subitem">Agenda de Eventos</a>
                <a href="./pedidos.html" class="nav-subitem">Pedidos</a>
                <a href="./ordens-producao.html" class="nav-subitem">Ordens de Produção</a>
                <a href="./gestao-producao.html" class="nav-subitem">Produção</a>
            </div>
        </div>
    </nav>

    <div class="sidebar-footer">
        <div class="user-profile-container">
            <button class="user-profile" id="userProfileButton">
                <div class="user-avatar">
                    <img src="https://ui-avatars.com/api/?name=Irmãos+Ferreira&background=0068ab&color=fff&size=40&rounded=true" alt="Irmãos Ferreira">
                </div>
                <div class="user-info">
                    <div class="user-name">Irmãos Ferreira</div>
                    <div class="user-email">Estufa.I.F@gmail.com</div>
                </div>
                <i data-lucide="chevron-down" class="dropdown-arrow"></i>
            </button>

            <div class="user-dropdown" id="userDropdown">
                <a href="#" class="user-dropdown-item">
                    <i data-lucide="user" class="dropdown-item-icon"></i>
                    <span>Conta</span>
                </a>
                <a href="#" class="user-dropdown-item">
                    <i data-lucide="settings" class="dropdown-item-icon"></i>
                    <span>Configurações</span>
                </a>
                <div class="user-dropdown-divider"></div>
                <a href="./login.html" class="user-dropdown-item logout" data-logout>
                    <i data-lucide="log-out" class="dropdown-item-icon"></i>
                    <span>Sair</span>
                </a>
            </div>
        </div>
    </div>
</aside>


    <!-- Main Content -->
    <main class="main-content">
        <div class="pedidos-container">
            <!-- Topbar com Breadcrumb -->
            <div class="pedidos-topbar">
                <div class="breadcrumb">
                    <a href="#" class="breadcrumb-item">
                        <i data-lucide="layout-grid"></i>
                        Painel
                    </a>
                    <i data-lucide="chevron-right" class="breadcrumb-separator"></i>
                    <span class="breadcrumb-item">Estufas</span>
                    <i data-lucide="chevron-right" class="breadcrumb-separator"></i>
                    <span class="breadcrumb-item active">Pedidos</span>
                </div>

                <div class="topbar-actions">
                    <button class="icon-button" title="Notificações">
                        <i data-lucide="bell"></i>
                    </button>
                    <button class="icon-button" title="Configurações">
                        <i data-lucide="settings"></i>
                    </button>
                    <button class="icon-button help-button">
                        <i data-lucide="circle-help"></i>
                        <span>Ajuda</span>
                    </button>
                </div>
            </div>

            <!-- Header com Tabs -->
            <div class="pedidos-header">
                <div class="pedidos-tabs">
                    <button class="pedidos-tab" onclick="window.location.href='#'">Agenda de Eventos</button>
                    <button class="pedidos-tab active">Pedidos</button>
                    <button class="pedidos-tab" onclick="window.location.href='./ordens-producao.html'">Ordens de Produção</button>
                    <button class="pedidos-tab" onclick="window.location.href='./gestao-producao.html'">Produção</button>
                </div>
            </div>

            <!-- Título e Controles -->
            <div class="pedidos-title-bar">
                <div class="title-left">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h1 class="pedidos-title">Gestão de Pedidos</h1>
                </div>

                <div class="title-right">
                    <div class="view-toggle">
                        <button class="view-btn active" title="Visualização em grade">
                            <i data-lucide="grid-2x2"></i>
                        </button>
                        <button class="view-btn" title="Visualização em lista">
                            <i data-lucide="list"></i>
                        </button>
                    </div>

                    <button class="btn-filtros">
                        <i data-lucide="sliders-horizontal"></i>
                        <span>Filtros avançados</span>
                    </button>

                    <button class="btn-novo-pedido">
                        <i data-lucide="plus"></i>
                        <span>Novo Pedido</span>
                    </button>
                </div>
            </div>

            <!-- Filtros Ativos (Badges) -->
            <div class="pedidos-active-filters">
                <div class="filter-badge">
                    Status: Em Produção
                    <button class="filter-badge-remove" title="Remover filtro">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <div class="filter-badge">
                    Estágio: Recebido
                    <button class="filter-badge-remove" title="Remover filtro">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <div class="filter-badge">
                    Período: Últimos 30 dias
                    <button class="filter-badge-remove" title="Remover filtro">
                        <i data-lucide="x"></i>
                    </button>
                </div>
            </div>

                        <!-- Kanban Board -->
            <div class="pedidos-kanban">
                <!-- Coluna: Recebido -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Recebido</h3>
                        <span class="kanban-column-count">2</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-001</span>
                                <span class="pedido-badge badge-faturado">Faturado</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45878</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">João Silva</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Maria Santos</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">14/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Eucalipto Clone AEC 144</div>
                                    <div class="pedido-muda-quantidade">Qtd: 5.000</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">19/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 15.500,00
                            </div>
                        </div>

                        <!-- Card 2 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-004</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45881</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">João Silva</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Maria Santos</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">14/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Eucalipto Clone AEC 144</div>
                                    <div class="pedido-muda-quantidade">Qtd: 5.000</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">19/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 15.500,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Em Preparação -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Em Preparação</h3>
                        <span class="kanban-column-count">1</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-005</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45882</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">Carlos Mendes</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Juliana Rocha</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">13/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Teca</div>
                                    <div class="pedido-muda-quantidade">Qtd: 4.200</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">18/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 12.300,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Em Produção -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Em Produção</h3>
                        <span class="kanban-column-count">1</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-006</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45878</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">João Silva</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Maria Santos</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">14/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Eucalipto Clone AEC 144</div>
                                    <div class="pedido-muda-quantidade">Qtd: 5.000</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">19/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 15.500,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Em Expedição -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Em Expedição</h3>
                        <span class="kanban-column-count">1</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-007</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45878</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">João Silva</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Maria Santos</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">14/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Eucalipto Clone AEC 144</div>
                                    <div class="pedido-muda-quantidade">Qtd: 5.000</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">19/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 15.500,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Faturado -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Faturado</h3>
                        <span class="kanban-column-count">1</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-002</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45879</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">Maria Costa</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Carlos Souza</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">12/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Pinus Taeda</div>
                                    <div class="pedido-muda-quantidade">Qtd: 3.000</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">15/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 9.800,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Em Trânsito -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Em Trânsito</h3>
                        <span class="kanban-column-count">1</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card 1 -->
                        <div class="pedido-card">
                            <div class="pedido-card-header">
                                <span class="pedido-id">AZW-2025-003</span>
                            </div>

                            <div class="pedido-info-secondary">
                                <span>TG-45880</span>
                            </div>

                            <div class="pedido-cliente">
                                <div class="pedido-cliente-avatar">
                                    <i data-lucide="user"></i>
                                    <div class="pedido-cliente-nome">Pedro Oliveira</div>
                                </div>
                                <div class="pedido-vendedor">Vendedor: Ana Lima</div>
                            </div>

                            <hr class="pedido-divider">

                            <div class="pedido-info-row">
                                <i data-lucide="calendar"></i>
                                <span class="pedido-info-label">Pedido:</span>
                                <span class="pedido-info-value">10/01/2025</span>
                            </div>

                            <div class="pedido-muda">
                                <i data-lucide="sprout"></i>
                                <div class="pedido-muda-info">
                                    <div class="pedido-muda-value">Muda de Acácia Mangium</div>
                                    <div class="pedido-muda-quantidade">Qtd: 2.500</div>
                                </div>
                            </div>

                            <div class="pedido-info-row">
                                <i data-lucide="calendar-clock"></i>
                                <span class="pedido-info-label">Entrega em:</span>
                                <span class="pedido-info-value">10/02/2025</span>
                            </div>

                            <div class="pedido-valor">
                                <i data-lucide="circle-dollar-sign"></i>
                                R$ 7.200,00
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna: Cancelado -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <h3 class="kanban-column-title">Cancelado</h3>
                        <span class="kanban-column-count">0</span>
                    </div>
                    <div class="kanban-column-cards">
                        <!-- Card vazio (placeholder) -->
                        <div class="pedido-card pedido-card-empty">
                            <div class="pedido-card-empty-content">
                                <i data-lucide="inbox"></i>
                                <p>Não há ordens de Produção</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- ========================================
             VISUALIZAÇÃO EM LISTA (TABELA)
             ======================================== -->
        <div class="pedidos-lista" style="display: none;">
            <div class="pedidos-lista-container">
                <table class="pedidos-table">
                    <thead>
                    </thead>
                    <tbody>
                    <!-- Pedido 1 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-001</span>
                            <span class="pedido-codigo">TG-45878</span>
                        </td>
                        <td>
                            <span class="badge-table badge-faturado-table">Faturado</span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>João Silva</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-recebido">Recebido</span>
                        </td>
                    </tr>

                    <!-- Pedido 2 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-002</span>
                            <span class="pedido-codigo">TG-45879</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>Aédo Silva</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-parcial">Parcial</span>
                        </td>
                    </tr>

                    <!-- Pedido 3 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-003</span>
                            <span class="pedido-codigo">TG-45880</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>Emanoel</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-em-transito">Em Trânsito</span>
                        </td>
                    </tr>

                    <!-- Pedido 4 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-004</span>
                            <span class="pedido-codigo">TG-45881</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>Emanoel</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 29.10.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-recebido">Recebido</span>
                        </td>
                    </tr>

                    <!-- Pedido 5 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-005</span>
                            <span class="pedido-codigo">TG-45882</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>Emanoel</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-em-preparacao">Em Preparação</span>
                        </td>
                    </tr>

                    <!-- Pedido 6 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-006</span>
                            <span class="pedido-codigo">TG-45878</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>João Silva</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-em-transito">Em Trânsito</span>
                        </td>
                    </tr>

                    <!-- Pedido 7 -->
                    <tr class="pedido-row">
                        <td class="pedido-numero">
                            <span class="pedido-id-link">AZW-2025-007</span>
                            <span class="pedido-codigo">TG-45878</span>
                        </td>
                        <td>
                            <span class="badge-table"></span>
                        </td>
                        <td class="pedido-cliente-td">
                            <i data-lucide="user" class="table-icon"></i>
                            <span>João Silva</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>14/01/2025</span>
                        </td>
                        <td class="pedido-data">
                            <i data-lucide="calendar" class="table-icon"></i>
                            <span>19/02/2025</span>
                        </td>
                        <td class="pedido-qtd">
                            <i data-lucide="package" class="table-icon"></i>
                            <span>5.000</span>
                        </td>
                        <td class="pedido-valor-td">
                            <i data-lucide="dollar-sign" class="table-icon"></i>
                            <span>R$ 15.500,00</span>
                        </td>
                        <td>
                            <span class="status-tag status-cancelado">Cancelado</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>

        </div>
        <!-- Fecha pedidos-container -->

        <!-- ========================================
             DRAWER: FILTROS AVANÇADOS
             ======================================== -->
        <div id="drawerFiltrosAvancados" class="drawer-overlay" style="display: none;">
            <div class="drawer-container">
                <div class="drawer-header">
                    <h2 class="drawer-title">Filtros Avançados</h2>
                    <button class="drawer-close" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <div class="drawer-body">
                    <!-- Período -->
                    <div class="drawer-form-row">
                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Data inicial</label>
                            <input type="date" class="drawer-form-input" id="filtroDataInicial" placeholder="00/00/0000">
                        </div>
                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Data inicial</label>
                            <input type="date" class="drawer-form-input" id="filtroDataFinal" placeholder="00/00/0000">
                        </div>
                    </div>

                    <!-- Tipo de Cultivo e Status da Produção (lado a lado) -->
                    <div class="drawer-form-row">
                        <!-- Tipo de Cultivo -->
                        <div class="filter-section">
                            <h3 class="filter-section-title">Tipo de Cultivo</h3>
                            <div class="drawer-checkbox-group">
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="tomate">
                                    <span class="checkbox-text">Tomate</span>
                                </label>
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="pimentao">
                                    <span class="checkbox-text">Pimentão</span>
                                </label>
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="alface">
                                    <span class="checkbox-text">Alface</span>
                                </label>
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="cenoura">
                                    <span class="checkbox-text">Cenoura</span>
                                </label>
                            </div>
                        </div>

                        <!-- Status da Produção -->
                        <div class="filter-section">
                            <h3 class="filter-section-title">Status da Produção</h3>
                            <div class="drawer-checkbox-group">
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="germinacao">
                                    <span class="checkbox-text">Germinação</span>
                                </label>
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="desenvolvimento">
                                    <span class="checkbox-text">Desenvolvimento</span>
                                </label>
                                <label class="drawer-checkbox-label">
                                    <input type="checkbox" class="checkbox-input" value="transplante">
                                    <span class="checkbox-text">Transplante</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Estufa e Taxa de Germinação (lado a lado) -->
                    <div class="drawer-form-row">
                        <!-- Estufa -->
                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Estufa</label>
                            <select class="drawer-form-select" id="filtroEstufa">
                                <option value="">Selecione a estufa</option>
                                <option value="estufa-1">Estufa 01</option>
                                <option value="estufa-2">Estufa 02</option>
                                <option value="estufa-3">Estufa 03</option>
                                <option value="estufa-4">Estufa 04</option>
                            </select>
                        </div>

                        <!-- Taxa de Germinação -->
                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Taxa de Germinação (%)</label>
                            <div class="range-slider-container">
                                <input type="range" class="range-slider" id="taxaGerminacao" min="0" max="100" value="0" step="1">
                                <div class="range-value-indicator" id="taxaGerminacaoIndicator">0%</div>
                                <div class="range-values">
                                    <span>0</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ordenar por -->
                    <div class="drawer-form-group">
                        <label class="drawer-form-label">Ordenar por</label>
                        <div class="filter-chips-group">
                            <button type="button" class="filter-chip" data-order="recentes">Mais recentes</button>
                            <button type="button" class="filter-chip" data-order="antigos">Mais antigos</button>
                            <button type="button" class="filter-chip" data-order="maior-producao">Maior produção</button>
                            <button type="button" class="filter-chip" data-order="menor-producao">Menor produção</button>
                        </div>
                    </div>
                </div>

                <div class="drawer-footer">
                    <button class="btn-secondary" id="limparFiltrosAvancados">Limpar Filtros</button>
                    <button class="btn-primary" id="aplicarFiltrosAvancados">Aplicar Filtros</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             MODAL: CADASTRO DE ORDEM DE PRODUÇÃO
             ======================================== -->
        <div id="modalCadastroOP" class="modal-overlay" style="display: none;">
            <div class="modal-container modal-xl">
                <div class="modal-header">
                    <div>
                        <h2 class="modal-title">Nova Ordem de Produção</h2>
                        <p class="modal-subtitle">Preencha os dados para criar uma nova ordem de produção</p>
                    </div>
                    <button class="modal-close" onclick="closeModal('modalCadastroOP')" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Informações do Pedido -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Informações do Pedido</h3>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Pedido <span class="required-asterisk">*</span></label>
                                <select class="drawer-form-select" required>
                                    <option value="">Selecione um pedido</option>
                                    <option value="AZW-2025-001">AZW-2025-001 - João Silva</option>
                                    <option value="AZW-2025-002">AZW-2025-002 - Maria Costa</option>
                                    <option value="AZW-2025-003">AZW-2025-003 - Pedro Oliveira</option>
                                </select>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Número da OP <span class="required-asterisk">*</span></label>
                                <input type="text" class="drawer-form-input" placeholder="Gerado automaticamente" readonly>
                            </div>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Data de Emissão <span class="required-asterisk">*</span></label>
                                <input type="date" class="drawer-form-input" required>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Data de Entrega Prevista <span class="required-asterisk">*</span></label>
                                <input type="date" class="drawer-form-input" required>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Produto/Muda -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Produto</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Tipo de Muda <span class="required-asterisk">*</span></label>
                            <select class="drawer-form-select" required>
                                <option value="">Selecione o tipo de muda</option>
                                <option value="eucalipto-aec144">Muda de Eucalipto Clone AEC 144</option>
                                <option value="pinus-taeda">Muda de Pinus Taeda</option>
                                <option value="teca">Muda de Teca</option>
                                <option value="acacia-mangium">Muda de Acácia Mangium</option>
                            </select>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Quantidade <span class="required-asterisk">*</span></label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="1" required>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Unidade</label>
                                <select class="drawer-form-select">
                                    <option value="unidade">Unidade</option>
                                    <option value="bandeja">Bandeja</option>
                                    <option value="lote">Lote</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Estufa/Localização -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Localização</h3>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Estufa <span class="required-asterisk">*</span></label>
                                <select class="drawer-form-select" required>
                                    <option value="">Selecione a estufa</option>
                                    <option value="estufa-1">Estufa 01 - Eucalipto</option>
                                    <option value="estufa-2">Estufa 02 - Pinus</option>
                                    <option value="estufa-3">Estufa 03 - Teca</option>
                                    <option value="estufa-4">Estufa 04 - Acácia</option>
                                </select>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Setor</label>
                                <select class="drawer-form-select">
                                    <option value="">Selecione o setor</option>
                                    <option value="setor-a">Setor A</option>
                                    <option value="setor-b">Setor B</option>
                                    <option value="setor-c">Setor C</option>
                                    <option value="setor-d">Setor D</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Observações -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Observações</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Observações Gerais</label>
                            <textarea class="drawer-form-textarea" rows="4" placeholder="Digite observações adicionais..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn-secondary" onclick="closeModal('modalCadastroOP')">Cancelar</button>
                    <button class="btn-primary" id="btnSalvarOP">Criar Ordem de Produção</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             DRAWER: LANÇAMENTO DE PRODUÇÃO
             ======================================== -->
        <div id="drawerLancamento" class="drawer-overlay" style="display: none;">
            <div class="drawer-container drawer-criar-grupo">
                <div class="drawer-header">
                    <div class="drawer-header-content">
                        <h2 class="drawer-title">Lançamento de Produção</h2>
                        <p class="drawer-subtitle">Registre o andamento da produção</p>
                    </div>
                    <button class="drawer-close" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <div class="drawer-body">
                    <!-- Ordem de Produção -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Ordem de Produção</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">OP <span class="required-asterisk">*</span></label>
                            <select class="drawer-form-select" required>
                                <option value="">Selecione a OP</option>
                                <option value="op-001">OP-2025-001 - Eucalipto Clone AEC 144</option>
                                <option value="op-002">OP-2025-002 - Pinus Taeda</option>
                                <option value="op-003">OP-2025-003 - Teca</option>
                            </select>
                        </div>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Data do Lançamento <span class="required-asterisk">*</span></label>
                            <input type="date" class="drawer-form-input" required>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Etapa -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Etapa de Produção</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Etapa <span class="required-asterisk">*</span></label>
                            <select class="drawer-form-select" required>
                                <option value="">Selecione a etapa</option>
                                <option value="semeadura">Semeadura</option>
                                <option value="germinacao">Germinação</option>
                                <option value="rustificacao">Rustificação</option>
                                <option value="expedicao">Expedição</option>
                            </select>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Quantidade Produzida <span class="required-asterisk">*</span></label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0" required>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Quantidade Perdida</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Responsável -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Responsável</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Operador <span class="required-asterisk">*</span></label>
                            <select class="drawer-form-select" required>
                                <option value="">Selecione o operador</option>
                                <option value="jose-silva">José Silva</option>
                                <option value="ana-santos">Ana Santos</option>
                                <option value="carlos-lima">Carlos Lima</option>
                                <option value="maria-oliveira">Maria Oliveira</option>
                            </select>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Observações -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Observações</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Observações</label>
                            <textarea class="drawer-form-textarea" rows="4" placeholder="Digite observações sobre o lançamento..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="drawer-footer">
                    <button class="btn-secondary" onclick="closeDrawer('drawerLancamento')">Cancelar</button>
                    <button class="btn-primary" id="btnSalvarLancamento">Salvar Lançamento</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             MODAL: CADASTRO DE MUDAS
             ======================================== -->
        <div id="modalCadastroMuda" class="modal-overlay" style="display: none;">
            <div class="modal-container modal-lg">
                <div class="modal-header">
                    <div>
                        <h2 class="modal-title">Cadastrar Nova Muda</h2>
                        <p class="modal-subtitle">Adicione um novo tipo de muda ao sistema</p>
                    </div>
                    <button class="modal-close" onclick="closeModal('modalCadastroMuda')" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Informações Básicas -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Informações Básicas</h3>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Nome da Muda <span class="required-asterisk">*</span></label>
                            <input type="text" class="drawer-form-input" placeholder="Ex: Eucalipto Clone AEC 144" required>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Espécie <span class="required-asterisk">*</span></label>
                                <select class="drawer-form-select" required>
                                    <option value="">Selecione a espécie</option>
                                    <option value="eucalipto">Eucalipto</option>
                                    <option value="pinus">Pinus</option>
                                    <option value="teca">Teca</option>
                                    <option value="acacia">Acácia</option>
                                    <option value="araucaria">Araucária</option>
                                    <option value="outras">Outras</option>
                                </select>
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Código/SKU</label>
                                <input type="text" class="drawer-form-input" placeholder="Ex: MUD-EUC-001">
                            </div>
                        </div>

                        <div class="drawer-form-group">
                            <label class="drawer-form-label">Descrição</label>
                            <textarea class="drawer-form-textarea" rows="3" placeholder="Digite uma descrição detalhada da muda..."></textarea>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Características -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Características</h3>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Altura Mínima (cm)</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0">
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Altura Máxima (cm)</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0">
                            </div>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Diâmetro Mínimo (mm)</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0" step="0.1">
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Diâmetro Máximo (mm)</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0" step="0.1">
                            </div>
                        </div>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Tempo de Produção (dias)</label>
                                <input type="number" class="drawer-form-input" placeholder="0" min="0">
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Tipo de Embalagem</label>
                                <select class="drawer-form-select">
                                    <option value="">Selecione</option>
                                    <option value="tubete-50">Tubete 50 cm³</option>
                                    <option value="tubete-110">Tubete 110 cm³</option>
                                    <option value="tubete-180">Tubete 180 cm³</option>
                                    <option value="saco-polietileno">Saco de Polietileno</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Valores -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Valores e Unidades</h3>

                        <div class="drawer-form-row">
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Preço Unitário (R$)</label>
                                <input type="number" class="drawer-form-input" placeholder="0,00" min="0" step="0.01">
                            </div>
                            <div class="drawer-form-group">
                                <label class="drawer-form-label">Unidade de Venda</label>
                                <select class="drawer-form-select">
                                    <option value="unidade">Unidade</option>
                                    <option value="bandeja">Bandeja</option>
                                    <option value="lote">Lote</option>
                                    <option value="milheiro">Milheiro</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-divider"></div>

                    <!-- Status -->
                    <div class="drawer-section">
                        <h3 class="drawer-section-title">Status</h3>

                        <div class="drawer-checkbox-group">
                            <label class="drawer-checkbox-label">
                                <input type="checkbox" class="checkbox-input" checked>
                                <span class="checkbox-text">Ativo para vendas</span>
                            </label>
                            <label class="drawer-checkbox-label">
                                <input type="checkbox" class="checkbox-input">
                                <span class="checkbox-text">Disponível para produção imediata</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn-secondary" onclick="closeModal('modalCadastroMuda')">Cancelar</button>
                    <button class="btn-primary" id="btnSalvarMuda">Cadastrar Muda</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             DRAWER: DETALHES DO PEDIDO
             ======================================== -->
        <div id="drawerDetalhesPedido" class="drawer-overlay" style="display: none;">
            <div class="drawer-container drawer-detalhes">
                <!-- Header -->
                <div class="drawer-header-detalhes">
                    <div class="drawer-header-info">
                        <h2 class="drawer-title-empresa">Agro Silva LTDA.</h2>
                        <div class="drawer-subtitle">
                            <span class="pedido-id-drawer">AZW-2025-001</span>
                            <span class="separator">•</span>
                            <span class="pedido-codigo-drawer">TG-45878</span>
                            <span class="separator">•</span>
                            <span class="badge-drawer badge-recebido-drawer">Recebido</span>
                        </div>
                    </div>
                    <div class="drawer-header-actions">
                        <span class="badge-faturado-drawer">Faturado</span>
                        <button class="drawer-close" aria-label="Fechar">
                            <i data-lucide="x"></i>
                        </button>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="drawer-tabs">
                    <button class="drawer-tab active" data-tab="informacoes">Informações gerais</button>
                    <button class="drawer-tab" data-tab="historico">Histórico</button>
                    <button class="drawer-tab" data-tab="planejamento">Planejamento</button>
                </div>

                <!-- Body -->
                <div class="drawer-body-detalhes">
                    <!-- Tab: Informações Gerais -->
                    <div class="drawer-tab-content active" data-tab-content="informacoes">
                        <!-- Informações do Cliente -->
                        <div class="info-section">
                            <h3 class="info-section-title">
                                <i data-lucide="user"></i>
                                Informações do Cliente
                            </h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Nome</span>
                                    <span class="info-value">João Silva</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">CPF/CNPJ</span>
                                    <span class="info-value">123.456.789-00</span>
                                </div>
                                <div class="info-item info-item-full">
                                    <span class="info-label">Endereço</span>
                                    <span class="info-value">Rua das Flores, 123 - São Paulo, SP</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Telefone</span>
                                    <span class="info-value">(11) 98765-4321</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">E-mail</span>
                                    <span class="info-value">joao.silva@gmail.com</span>
                                </div>
                                <div class="info-item info-item-full">
                                    <span class="info-label">Vendedor</span>
                                    <span class="info-value">Maria Santos</span>
                                </div>
                            </div>
                        </div>

                        <!-- Itens do Pedido & Planejamento -->
                        <div class="info-section">
                            <h3 class="info-section-title">
                                <i data-lucide="package"></i>
                                Itens do Pedido & Planejamento
                            </h3>
                            <div class="pedido-items-table">
                                <table class="items-table">
                                    <thead>
                                        <tr>
                                            <th>Produto</th>
                                            <th>Qtd. Pedido</th>
                                            <th>Valor Unitário</th>
                                            <th>Valor Total</th>
                                            <th>Qtd. Planejada</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Muda de Eucalipto<br><span class="produto-codigo">MUD-001</span></td>
                                            <td>5.000</td>
                                            <td>R$ 2,50</td>
                                            <td>R$ 12.500,00</td>
                                            <td>0/5000</td>
                                            <td>
                                                <button class="btn-planejar">Planejar</button>
                                            </td>
                                        </tr>
                                        <tr class="row-planejado">
                                            <td>Muda de Eucalipto<br><span class="produto-codigo">MUD-001</span></td>
                                            <td>5.000</td>
                                            <td>R$ 2,50</td>
                                            <td>R$ 12.500,00</td>
                                            <td>0/5000</td>
                                            <td>
                                                <label class="checkbox-planejado">
                                                    <input type="checkbox" checked>
                                                    <span>Planejado</span>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Resumo do Pedido -->
                        <div class="info-section">
                            <h3 class="info-section-title">
                                <i data-lucide="file-text"></i>
                                Resumo do Pedido
                            </h3>
                            <div class="resumo-grid">
                                <div class="resumo-item">
                                    <i data-lucide="calendar" class="resumo-icon"></i>
                                    <div>
                                        <span class="resumo-label">Data do Pedido</span>
                                        <span class="resumo-value">14/01/2025</span>
                                    </div>
                                </div>
                                <div class="resumo-item">
                                    <i data-lucide="truck" class="resumo-icon"></i>
                                    <div>
                                        <span class="resumo-label">Entrega Prevista</span>
                                        <span class="resumo-value">19/02/2025</span>
                                    </div>
                                </div>
                                <div class="resumo-item">
                                    <i data-lucide="circle-dollar-sign" class="resumo-icon"></i>
                                    <div>
                                        <span class="resumo-label">Valor Total do Pedido</span>
                                        <span class="resumo-value resumo-value-destaque">R$ 15.500,00</span>
                                    </div>
                                </div>
                                <div class="resumo-item resumo-item-full">
                                    <i data-lucide="message-square" class="resumo-icon"></i>
                                    <div>
                                        <span class="resumo-label">Observação do Pedido</span>
                                        <span class="resumo-value">Cliente solicitou entrega pela manhã</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-gerar-termo">
                                <i data-lucide="file-check"></i>
                                Gerar Termo de Aceite
                            </button>
                        </div>
                    </div>

                    <!-- Tab: Histórico -->
                    <div class="drawer-tab-content" data-tab-content="historico">
                        <div class="historico-section">
                            <h3 class="historico-title">Histórico do Pedido</h3>

                            <div class="timeline">
                                <!-- Evento 1: Lote pronto -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-success"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Lote pronto para entrega</h4>
                                                <span class="timeline-date">08/11/2025 às 14:30</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-success">Sucesso</span>
                                        </div>
                                        <p class="timeline-description">Lote de 5.000 mudas aprovado e liberado para expedição</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Responsável:</span>
                                            <span class="timeline-responsible-name">Andre Cesarini</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evento 2: Vistoria -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-operation"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Vistoria de qualidade</h4>
                                                <span class="timeline-date">05/11/2025 às 10:15</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-operation">Operação</span>
                                        </div>
                                        <p class="timeline-description">Vistoria realizada com aprovação. Taxa de germinação: 98%. Data estimada para enxertia atualizada.</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Operador:</span>
                                            <span class="timeline-responsible-name">Ana Silva</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evento 3: Mudança de localização -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-movement"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Mudança de localização</h4>
                                                <span class="timeline-date">20/10/2025 às 15:45</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-movement">Movimentação</span>
                                        </div>
                                        <p class="timeline-description">Lote movido de Estufa 1 - Bancada A2 para Estufa 2 - Bancada C5</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Responsável:</span>
                                            <span class="timeline-responsible-name">Pedro Almeida</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evento 4: Semeio -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-production"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Semeio realizado</h4>
                                                <span class="timeline-date">15/10/2025 às 09:00</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-production">Produção</span>
                                        </div>
                                        <p class="timeline-description">Semeio de 5.000 mudas de Eucalipto Clone AEC 144 iniciado na Estufa 1</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Responsável:</span>
                                            <span class="timeline-responsible-name">Andre Santos</span>
                                            <span class="timeline-separator">•</span>
                                            <span class="timeline-responsible-label">Bandejas:</span>
                                            <span class="timeline-responsible-name">50 unidades</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evento 5: Planejamento -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-planning"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Planejamento realizado</h4>
                                                <span class="timeline-date">16/01/2025 às 11:20</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-planning">Planejamento</span>
                                        </div>
                                        <p class="timeline-description">Pedido planejado para produção. Data de semeio: 15/10/2025. Previsão de entrega: 19/02/2025</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Responsável:</span>
                                            <span class="timeline-responsible-name">Andre Santos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evento 6: Pedido recebido -->
                                <div class="timeline-item">
                                    <div class="timeline-marker timeline-marker-start"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-header">
                                            <div class="timeline-header-left">
                                                <h4 class="timeline-event-title">Pedido recebido</h4>
                                                <span class="timeline-date">14/01/2025 às 09:15</span>
                                            </div>
                                            <span class="timeline-badge timeline-badge-start">Início</span>
                                        </div>
                                        <p class="timeline-description">Pedido AZW-2025-001 recebido do cliente João Silva</p>
                                        <div class="timeline-responsible">
                                            <i data-lucide="user"></i>
                                            <span class="timeline-responsible-label">Vendedor:</span>
                                            <span class="timeline-responsible-name">Maria Santos</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Planejamento -->
                    <div class="drawer-tab-content" data-tab-content="planejamento">
                        <div class="planejamento-section">
                            <h3 class="planejamento-title">Log de Planejamento</h3>
                            <p class="planejamento-subtitle">Histórico de todas as ações de planejamento realizadas para este pedido</p>

                            <!-- Cards de Resumo -->
                            <div class="planejamento-resumo">
                                <div class="planejamento-resumo-card">
                                    <span class="planejamento-resumo-label">Quantidade Total do Pedido</span>
                                    <span class="planejamento-resumo-value">5.000</span>
                                </div>
                                <div class="planejamento-resumo-card">
                                    <span class="planejamento-resumo-label">Quantidade Planejada</span>
                                    <span class="planejamento-resumo-value planejamento-resumo-value-blue">5.000</span>
                                </div>
                                <div class="planejamento-resumo-card">
                                    <span class="planejamento-resumo-label">Quantidade Pendente</span>
                                    <span class="planejamento-resumo-value planejamento-resumo-value-orange">0</span>
                                </div>
                            </div>

                            <!-- Planejamentos Realizados -->
                            <div class="planejamentos-realizados">
                                <h4 class="planejamentos-realizados-title">Planejamentos Realizados (6)</h4>

                                <!-- Planejamento 1: Concluído -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">16/01/2025 às 11:20</span>
                                            <span class="planejamento-status-badge planejamento-status-concluido">Concluído</span>
                                        </div>
                                        <span class="planejamento-quantidade">1.500 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">15/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">19/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Andre Santos</span>
                                        </div>
                                    </div>
                                    <p class="planejamento-observacao">Primeira etapa do planejamento - Lote prioritário com sementes premium</p>
                                </div>

                                <!-- Planejamento 2: Em Andamento -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">22/01/2025 às 09:30</span>
                                            <span class="planejamento-status-badge planejamento-status-andamento">Em Andamento</span>
                                        </div>
                                        <span class="planejamento-quantidade">800 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">25/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">20/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Maria Santos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Planejamento 3: Pendente -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">22/01/2025 às 09:30</span>
                                            <span class="planejamento-status-badge planejamento-status-pendente">Pendente</span>
                                        </div>
                                        <span class="planejamento-quantidade">800 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">25/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">20/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Maria Santos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Planejamento 4: Pendente -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">27/01/2025 às 08:30</span>
                                            <span class="planejamento-status-badge planejamento-status-pendente">Pendente</span>
                                        </div>
                                        <span class="planejamento-quantidade">800 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">25/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">20/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Maria Santos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Planejamento 5: Pendente -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">27/01/2025 às 08:30</span>
                                            <span class="planejamento-status-badge planejamento-status-pendente">Pendente</span>
                                        </div>
                                        <span class="planejamento-quantidade">800 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">25/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">20/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Maria Santos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Planejamento 6: Concluído -->
                                <div class="planejamento-card">
                                    <div class="planejamento-card-header">
                                        <div class="planejamento-card-header-left">
                                            <span class="planejamento-date">16/01/2025 às 11:20</span>
                                            <span class="planejamento-status-badge planejamento-status-concluido">Concluído</span>
                                        </div>
                                        <span class="planejamento-quantidade">1.500 un.</span>
                                    </div>
                                    <h5 class="planejamento-produto-nome">Muda de Eucalipto Clone AEC 144</h5>
                                    <div class="planejamento-info-grid">
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Semeio</span>
                                            <span class="planejamento-info-value">15/10/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Previsão</span>
                                            <span class="planejamento-info-value">19/11/2025</span>
                                        </div>
                                        <div class="planejamento-info-item">
                                            <span class="planejamento-info-label">Responsável</span>
                                            <span class="planejamento-info-value">Andre Santos</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="drawer-footer-detalhes">
                    <button class="btn-cancelar-pedido">Cancelar Pedido</button>
                    <div class="drawer-footer-right">
                        <button class="btn-cancelar">Cancelar</button>
                        <button class="btn-planejar-pedido">Planejar Pedido</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             MODAL: PLANEJAR ITEM
             ======================================== -->
        <div id="modalPlanejarItem" class="modal-overlay" style="display: none;">
            <div class="modal-container modal-planejar">
                <!-- Header -->
                <div class="modal-header">
                    <h2 class="modal-title">Planejar Item</h2>
                    <button class="modal-close" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <!-- Body -->
                <div class="modal-body-planejar">
                    <!-- Informações do Produto -->
                    <div class="planejar-info-section">
                        <span class="planejar-info-label">Produto</span>
                        <p class="planejar-info-produto">Muda de Eucalipto Clone - MUD-001</p>
                        <div class="planejar-info-stats">
                            <div class="planejar-stat">
                                <span class="planejar-stat-label">Total Pedido:</span>
                                <span class="planejar-stat-value">5000</span>
                            </div>
                            <div class="planejar-stat">
                                <span class="planejar-stat-label">A Planejar:</span>
                                <span class="planejar-stat-value">5000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Formulário -->
                    <div class="planejar-form">
                        <!-- Tipo de Atendimento -->
                        <div class="form-group">
                            <label class="form-label">Tipo de Atendimento</label>
                            <select class="form-select" id="tipoAtendimento">
                                <option value="">Selecione</option>
                                <option value="estoque">Estoque (Venda Direta)</option>
                                <option value="remessa">Remessa Futura</option>
                            </select>
                        </div>

                        <!-- Quantidade -->
                        <div class="form-group">
                            <label class="form-label">Quantidade para este planejamento</label>
                            <input type="number" class="form-input" id="quantidadePlanejar" placeholder="Quantidade a Planejar" min="0" max="5000">
                        </div>

                        <!-- Data prevista -->
                        <div class="form-group">
                            <label class="form-label">Data prevista para Semeio</label>
                            <input type="date" class="form-input" id="dataSemeio" placeholder="00/00/0000">
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="modal-footer-planejar">
                    <button class="btn-cancelar-text" id="btnCancelarPlanejar">Cancelar</button>
                    <button class="btn-confirmar-op" id="btnConfirmarPlanejar">Confirmar e Gerar OP</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             MODAL: CANCELAR PEDIDO
             ======================================== -->
        <div id="modalCancelarPedido" class="modal-overlay" style="display: none;">
            <div class="modal-container modal-cancelar">
                <!-- Header -->
                <div class="modal-header">
                    <h2 class="modal-title">Cancelar Pedido / Itens</h2>
                    <button class="modal-close" id="btnFecharCancelar" aria-label="Fechar">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <!-- Body -->
                <div class="modal-body-cancelar">
                    <!-- Aviso -->
                    <div class="cancelar-aviso">
                        <p class="cancelar-aviso-destaque">Selecione a quantidade a cancelar para cada item.</p>
                        <p class="cancelar-aviso-texto">O saldo máximo é calculado subtraindo a quantidade já atendida e cancelada anteriormente.</p>
                    </div>

                    <!-- Tabela de Itens -->
                    <div class="cancelar-table-container">
                        <table class="cancelar-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Qtd. Pedido</th>
                                    <th>Qtd. Atendida</th>
                                    <th>Qtd. Canc. Ant.</th>
                                    <th>Saldo Disp.</th>
                                    <th>A Cancelar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="cancelar-produto">
                                            <span class="cancelar-produto-nome">Muda de Eucalipto</span>
                                            <span class="cancelar-produto-codigo">MUD-001</span>
                                        </div>
                                    </td>
                                    <td>5.000</td>
                                    <td>R$ 2,50</td>
                                    <td>R$ 12.500,00</td>
                                    <td>0/5000</td>
                                    <td>
                                        <input type="number" class="cancelar-input" min="0" max="5000" value="0">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="cancelar-produto">
                                            <span class="cancelar-produto-nome">Muda de Eucalipto</span>
                                            <span class="cancelar-produto-codigo">MUD-001</span>
                                        </div>
                                    </td>
                                    <td>5.000</td>
                                    <td>R$ 2,50</td>
                                    <td>R$ 12.500,00</td>
                                    <td>0/5000</td>
                                    <td>
                                        <input type="number" class="cancelar-input" min="0" max="5000" value="0">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="cancelar-produto">
                                            <span class="cancelar-produto-nome">Muda de Eucalipto</span>
                                            <span class="cancelar-produto-codigo">MUD-001</span>
                                        </div>
                                    </td>
                                    <td>5.000</td>
                                    <td>R$ 2,50</td>
                                    <td>R$ 12.500,00</td>
                                    <td>0/5000</td>
                                    <td>
                                        <input type="number" class="cancelar-input" min="0" max="5000" value="0">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="cancelar-produto">
                                            <span class="cancelar-produto-nome">Muda de Eucalipto</span>
                                            <span class="cancelar-produto-codigo">MUD-001</span>
                                        </div>
                                    </td>
                                    <td>5.000</td>
                                    <td>R$ 2,50</td>
                                    <td>R$ 12.500,00</td>
                                    <td>0/5000</td>
                                    <td>
                                        <input type="number" class="cancelar-input" min="0" max="5000" value="0">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Footer -->
                <div class="modal-footer-cancelar">
                    <button class="btn-cancelar-modal" id="btnCancelarModalCancelar">Cancelar</button>
                    <button class="btn-confirmar-cancelamento" id="btnConfirmarCancelamento">Confirmar Cancelamento</button>
                </div>
            </div>
        </div>

    </main>

    <!-- Scripts -->
    <script src="scripts/main.js"></script>
    <script src="scripts/sidebar-search.js"></script>
    <script src="scripts/modals.js"></script>
    

    <!-- Autenticação -->
    <script src="scripts/auth.js"></script>

    <!-- Inicializar Lucide Icons -->
    <script>
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Navegação entre tabs
        document.querySelectorAll('.pedidos-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.pedidos-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Handler de clique nos cards
        document.querySelectorAll('.pedido-card').forEach(card => {
            card.addEventListener('click', function() {
                // Ignore clicks on empty cards
                if (this.classList.contains('pedido-card-empty')) return;

                const id = this.querySelector('.pedido-id')?.textContent;
                console.log('Card clicado:', id);
                // Aqui pode abrir modal ou navegar para detalhes
            });
        });

        // ==================================================
        // EVENT LISTENERS PARA ABRIR MODAIS E DRAWERS
        // ==================================================

        // Botão "Filtros avançados" - Abre drawer de filtros
        document.querySelector('.btn-filtros')?.addEventListener('click', function() {
            openDrawer('drawerFiltrosAvancados');
        });

        // Limpar filtros avançados
        document.getElementById('limparFiltrosAvancados')?.addEventListener('click', function() {
            // Uncheck all checkboxes
            document.querySelectorAll('#drawerFiltrosAvancados .checkbox-input').forEach(checkbox => {
                checkbox.checked = false;
            });
            // Reset selects
            document.querySelectorAll('#drawerFiltrosAvancados select').forEach(select => {
                select.value = '';
            });
            // Reset date inputs
            document.querySelectorAll('#drawerFiltrosAvancados input[type="date"]').forEach(input => {
                input.value = '';
            });
            // Reset range slider
            const taxaSlider = document.getElementById('taxaGerminacao');
            if (taxaSlider) {
                taxaSlider.value = 0;
                updateSliderFill(); // Atualizar visual do slider
            }
            // Reset filter chips - remove active from all
            document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));

            console.log('Filtros limpos');
        });

        // Aplicar filtros avançados
        document.getElementById('aplicarFiltrosAvancados')?.addEventListener('click', function() {
            const filtros = {
                dataInicial: document.getElementById('filtroDataInicial')?.value || '',
                dataFinal: document.getElementById('filtroDataFinal')?.value || '',
                tipoCultivo: [],
                statusProducao: [],
                estufa: document.getElementById('filtroEstufa')?.value || '',
                taxaGerminacao: document.getElementById('taxaGerminacao')?.value || 0,
                ordenarPor: document.querySelector('.filter-chip.active')?.getAttribute('data-order') || 'recentes'
            };

            // Get checked tipos de cultivo
            document.querySelectorAll('#drawerFiltrosAvancados .drawer-form-row .filter-section:nth-child(1) .checkbox-input:checked').forEach(checkbox => {
                filtros.tipoCultivo.push(checkbox.value);
            });

            // Get checked status da produção
            document.querySelectorAll('#drawerFiltrosAvancados .drawer-form-row .filter-section:nth-child(2) .checkbox-input:checked').forEach(checkbox => {
                filtros.statusProducao.push(checkbox.value);
            });

            console.log('Aplicar filtros:', filtros);
            closeDrawer('drawerFiltrosAvancados');

            // Show feedback
            alert('Filtros aplicados! (Funcionalidade de filtragem em desenvolvimento)');
        });

        // Taxa de germinação - slider com preenchimento progressivo azul
        function updateSliderFill() {
            const slider = document.getElementById('taxaGerminacao');
            const indicator = document.getElementById('taxaGerminacaoIndicator');

            if (slider) {
                const value = slider.value;
                const max = slider.max;
                const percentage = (value / max) * 100;

                // Aplicar gradiente com azul progressivo
                slider.style.background = `linear-gradient(to right, #0068AB 0%, #0068AB ${percentage}%, #E7E9E9 ${percentage}%, #E7E9E9 100%)`;

                // Atualizar indicador de valor
                if (indicator) {
                    indicator.textContent = `${value}%`;
                    // Posicionar o indicador abaixo do thumb
                    indicator.style.left = `calc(${percentage}% - 20px)`;
                }
            }
        }

        // Mostrar indicador
        function showSliderIndicator() {
            const indicator = document.getElementById('taxaGerminacaoIndicator');
            if (indicator) {
                indicator.classList.add('visible');
            }
        }

        // Esconder indicador
        function hideSliderIndicator() {
            const indicator = document.getElementById('taxaGerminacaoIndicator');
            if (indicator) {
                indicator.classList.remove('visible');
            }
        }

        // Inicializar slider ao carregar a página
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById('taxaGerminacao');
            if (slider) {
                // Definir estado inicial
                updateSliderFill();

                // Atualizar ao mover o slider
                slider.addEventListener('input', updateSliderFill);

                // Mostrar indicador quando começar a interagir
                slider.addEventListener('mousedown', showSliderIndicator);
                slider.addEventListener('touchstart', showSliderIndicator);
                slider.addEventListener('focus', showSliderIndicator);

                // Esconder indicador quando parar de interagir
                slider.addEventListener('mouseup', hideSliderIndicator);
                slider.addEventListener('touchend', hideSliderIndicator);
                slider.addEventListener('mouseleave', function(e) {
                    // Só esconde se não estiver clicando
                    if (e.buttons === 0) {
                        hideSliderIndicator();
                    }
                });
                slider.addEventListener('blur', hideSliderIndicator);
            }

            // Esconder indicador ao clicar fora
            document.addEventListener('click', function(e) {
                const slider = document.getElementById('taxaGerminacao');
                if (slider && !slider.contains(e.target)) {
                    hideSliderIndicator();
                }
            });
        });

        // Filter Chips - Ordenar por
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                // Remove active class from all chips in the same group
                const group = this.closest('.filter-chips-group');
                group.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));

                // Add active class to clicked chip
                this.classList.add('active');

                const orderType = this.getAttribute('data-order');
                console.log('Ordenar por:', orderType);
            });
        });

        // ==================================================
        // VIEW TOGGLE - KANBAN / LISTA
        // ==================================================

        const viewButtons = document.querySelectorAll('.view-btn');
        const pedidosKanban = document.querySelector('.pedidos-kanban');
        const pedidosLista = document.querySelector('.pedidos-lista');

        viewButtons.forEach((btn, index) => {
            btn.addEventListener('click', function() {
                // Remove active from all buttons
                viewButtons.forEach(b => b.classList.remove('active'));

                // Add active to clicked button
                this.classList.add('active');

                // Toggle views based on button index
                if (index === 0) {
                    // Grid/Kanban view
                    pedidosKanban.style.display = 'flex';
                    pedidosLista.style.display = 'none';
                    console.log('Visualização: Kanban');
                } else {
                    // List/Table view
                    pedidosKanban.style.display = 'none';
                    pedidosLista.style.display = 'block';
                    console.log('Visualização: Lista');
                }
            });
        });

        // Botão "Novo Pedido" (no title-right) - Pode abrir modal de cadastro OP ou pedido
        // Neste caso vamos abrir o modal de Cadastro de OP
        document.querySelectorAll('.btn-novo-pedido').forEach(btn => {
            btn.addEventListener('click', function() {
                openModal('modalCadastroOP');
                // Preencher data de emissão com data atual
                const dataEmissao = document.querySelector('#modalCadastroOP input[type="date"]');
                if (dataEmissao && !dataEmissao.value) {
                    const hoje = new Date().toISOString().split('T')[0];
                    dataEmissao.value = hoje;
                }
            });
        });

        // Salvar Ordem de Produção
        document.getElementById('btnSalvarOP')?.addEventListener('click', function() {
            // TODO: Implement save logic with validation
            const form = document.querySelector('#modalCadastroOP');
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value) {
                    isValid = false;
                    field.style.borderColor = '#DC2626';
                } else {
                    field.style.borderColor = '';
                }
            });

            if (isValid) {
                console.log('Salvando Ordem de Produção...');
                closeModal('modalCadastroOP');
                alert('Ordem de Produção criada com sucesso!');
            } else {
                alert('Por favor, preencha todos os campos obrigatórios.');
            }
        });

        // Drawer Lançamento - Pode ser aberto por botão específico
        // Exemplo: adicionar botão no header ou no menu
        // Por enquanto, vamos criar um atalho para teste
        document.addEventListener('keydown', function(e) {
            // Ctrl + L para abrir Lançamento (para teste)
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                openDrawer('drawerLancamento');
                // Preencher data do lançamento com data atual
                const dataLancamento = document.querySelector('#drawerLancamento input[type="date"]');
                if (dataLancamento && !dataLancamento.value) {
                    const hoje = new Date().toISOString().split('T')[0];
                    dataLancamento.value = hoje;
                }
            }
        });

        // Salvar Lançamento
        document.getElementById('btnSalvarLancamento')?.addEventListener('click', function() {
            // TODO: Implement save logic with validation
            const form = document.querySelector('#drawerLancamento');
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value) {
                    isValid = false;
                    field.style.borderColor = '#DC2626';
                } else {
                    field.style.borderColor = '';
                }
            });

            if (isValid) {
                console.log('Salvando Lançamento...');
                closeDrawer('drawerLancamento');
                alert('Lançamento registrado com sucesso!');
            } else {
                alert('Por favor, preencha todos os campos obrigatórios.');
            }
        });

        // Modal Cadastro de Muda - Pode ser aberto por botão específico
        // Exemplo: adicionar botão no menu ou em uma página de produtos
        // Por enquanto, vamos criar um atalho para teste
        document.addEventListener('keydown', function(e) {
            // Ctrl + M para abrir Cadastro de Muda (para teste)
            if (e.ctrlKey && e.key === 'm') {
                e.preventDefault();
                openModal('modalCadastroMuda');
            }
        });

        // Salvar Muda
        document.getElementById('btnSalvarMuda')?.addEventListener('click', function() {
            // TODO: Implement save logic with validation
            const form = document.querySelector('#modalCadastroMuda');
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value) {
                    isValid = false;
                    field.style.borderColor = '#DC2626';
                } else {
                    field.style.borderColor = '';
                }
            });

            if (isValid) {
                console.log('Salvando Muda...');
                closeModal('modalCadastroMuda');
                alert('Muda cadastrada com sucesso!');
            } else {
                alert('Por favor, preencha todos os campos obrigatórios.');
            }
        });

        console.log('✅ Event listeners para modais e drawers configurados');
        console.log('📝 Atalhos disponíveis:');
        console.log('   - Ctrl + L: Abrir Lançamento de Produção');
        console.log('   - Ctrl + M: Abrir Cadastro de Muda');

        // ========================================
        // DRAWER DE DETALHES DO PEDIDO
        // ========================================

        // Flag para controlar se o drawer está aberto
        let drawerIsOpen = false;

        // Função para extrair dados da linha da tabela
        function extractDataFromTableRow(row) {
            console.log('Extraindo dados da linha da tabela');
            const cells = row.querySelectorAll('td');
            console.log('Células encontradas:', cells.length);
            if (cells.length < 8) {
                console.warn('Número insuficiente de células:', cells.length);
                return null;
            }

            // Extrair ID e código
            const pedidoNumero = cells[0].querySelector('.pedido-numero');
            const id = pedidoNumero?.querySelector('.pedido-id-link')?.textContent || '';
            const codigo = pedidoNumero?.querySelector('.pedido-codigo')?.textContent || '';

            // Extrair status faturamento
            const badgeFaturamento = cells[1].querySelector('.badge-table');
            const statusFaturamento = badgeFaturamento?.textContent?.trim() || '';

            // Extrair cliente
            const cliente = cells[2].querySelector('span')?.textContent || '';

            // Extrair datas
            const dataPedido = cells[3].querySelector('span')?.textContent || '';
            const dataEntrega = cells[4].querySelector('span')?.textContent || '';

            // Extrair quantidade
            const quantidade = cells[5].querySelector('span')?.textContent || '';

            // Extrair valor
            const valorTotal = cells[6].querySelector('span')?.textContent || '';

            // Extrair status fase
            const statusTag = cells[7].querySelector('.status-tag');
            const statusFase = statusTag?.textContent?.trim() || '';

            const data = {
                id,
                codigo,
                statusFaturamento,
                cliente,
                dataPedido,
                dataEntrega,
                quantidade,
                valorTotal,
                statusFase,
                cpfCnpj: '123.456.789-00',
                endereco: 'Rua das Flores, 123 - São Paulo, SP',
                telefone: '(11) 98765-4321',
                email: 'joao.silva@gmail.com',
                vendedor: 'Maria Santos',
                produto: 'Muda de Eucalipto Clone - MUD-360',
                observacao: 'Cliente solicitou entrega pela manhã'
            };
            console.log('Dados extraídos da tabela:', data);
            return data;
        }

        // Função para extrair dados do card do Kanban
        function extractDataFromCard(card) {
            // Extrair ID
            const id = card.querySelector('.pedido-id')?.textContent || '';

            // Extrair código
            const codigo = card.querySelector('.pedido-info-secondary span')?.textContent || '';

            // Extrair status faturamento
            const badgeFaturamento = card.querySelector('.pedido-badge');
            const statusFaturamento = badgeFaturamento?.textContent?.trim() || '';

            // Extrair cliente
            const cliente = card.querySelector('.pedido-cliente-nome')?.textContent || '';

            // Extrair vendedor
            const vendedorText = card.querySelector('.pedido-vendedor')?.textContent || '';
            const vendedor = vendedorText.replace('Vendedor: ', '');

            // Extrair data do pedido
            const infoRows = card.querySelectorAll('.pedido-info-row');
            let dataPedido = '';
            let dataEntrega = '';

            infoRows.forEach(row => {
                const label = row.querySelector('.pedido-info-label')?.textContent || '';
                const value = row.querySelector('.pedido-info-value')?.textContent || '';
                if (label === 'Pedido:') dataPedido = value;
                if (label === 'Entrega em:') dataEntrega = value;
            });

            // Extrair valor
            const valorTotal = card.querySelector('.pedido-valor')?.textContent?.trim().replace('R$ ', 'R$ ') || '';

            // Extrair quantidade (da descrição da muda)
            const quantidade = card.querySelector('.pedido-muda-quantidade')?.textContent?.replace('Qtd: ', '') || '';

            // Extrair produto
            const produto = card.querySelector('.pedido-muda-value')?.textContent || '';

            return {
                id,
                codigo,
                statusFaturamento,
                cliente,
                dataPedido,
                dataEntrega,
                quantidade,
                valorTotal,
                statusFase: 'Em Produção',
                cpfCnpj: '123.456.789-00',
                endereco: 'Rua das Flores, 123 - São Paulo, SP',
                telefone: '(11) 98765-4321',
                email: 'joao.silva@gmail.com',
                vendedor,
                produto,
                observacao: 'Cliente solicitou entrega pela manhã'
            };
        }

        // Função para abrir o drawer de detalhes
        function openDetalhesPedido(pedidoData) {
            console.log('=== ABRINDO DRAWER ===');
            console.log('drawerIsOpen antes:', drawerIsOpen);
            console.log('Dados:', pedidoData);

            const drawer = document.getElementById('drawerDetalhesPedido');
            if (!drawer) {
                console.error('Drawer não encontrado!');
                return;
            }

            // Resetar animações para forçar re-execução
            drawer.style.animation = 'none';
            const container = drawer.querySelector('.drawer-container');
            if (container) {
                container.style.animation = 'none';
            }

            // Forçar reflow para resetar animações
            void drawer.offsetHeight;

            // Abrir drawer e re-aplicar animações
            drawer.style.display = 'flex';
            drawer.style.animation = 'fadeIn 0.3s ease forwards';
            if (container) {
                container.style.animation = 'slideInRight 0.3s ease forwards';
            }

            drawerIsOpen = true;

            console.log('Drawer aberto. drawerIsOpen:', drawerIsOpen, 'display:', drawer.style.display);

            if (pedidoData) {
                // Atualizar ID e Código do Pedido
                const pedidoId = drawer.querySelector('.pedido-id-drawer');
                if (pedidoId) pedidoId.textContent = pedidoData.id || 'N/A';

                const pedidoCodigo = drawer.querySelector('.pedido-codigo-drawer');
                if (pedidoCodigo) pedidoCodigo.textContent = pedidoData.codigo || 'N/A';

                // Badge Status Fase
                const badgeRecebido = drawer.querySelector('.badge-drawer.badge-recebido-drawer');
                if (badgeRecebido) {
                    badgeRecebido.textContent = pedidoData.statusFase || 'N/A';
                }

                // Badge Faturamento
                const badgeFaturado = drawer.querySelector('.badge-faturado-drawer');
                if (badgeFaturado) {
                    if (pedidoData.statusFaturamento) {
                        badgeFaturado.style.display = 'inline-flex';
                        badgeFaturado.textContent = pedidoData.statusFaturamento;
                    } else {
                        badgeFaturado.style.display = 'none';
                    }
                }

                // Informações do Cliente
                const infoGrid = drawer.querySelector('.info-grid');
                if (infoGrid) {
                    const infoValues = infoGrid.querySelectorAll('.info-value');
                    if (infoValues.length >= 6) {
                        infoValues[0].textContent = pedidoData.cliente || 'N/A';
                        infoValues[1].textContent = pedidoData.cpfCnpj || 'N/A';
                        infoValues[2].textContent = pedidoData.endereco || 'N/A';
                        infoValues[3].textContent = pedidoData.telefone || 'N/A';
                        infoValues[4].textContent = pedidoData.email || 'N/A';
                        infoValues[5].textContent = pedidoData.vendedor || 'N/A';
                    }
                }

                // Resumo do Pedido
                const resumoGrid = drawer.querySelector('.resumo-grid');
                if (resumoGrid) {
                    const resumoValues = resumoGrid.querySelectorAll('.resumo-value');
                    if (resumoValues.length >= 4) {
                        resumoValues[0].textContent = pedidoData.dataPedido || 'N/A';
                        resumoValues[1].textContent = pedidoData.dataEntrega || 'N/A';
                        resumoValues[2].textContent = pedidoData.valorTotal || 'N/A';
                        resumoValues[3].textContent = pedidoData.observacao || 'N/A';
                    }
                }
            }

            // Reinicializar ícones do Lucide
            setTimeout(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, 100);
        }

        // Função para fechar o drawer de detalhes
        function closeDetalhesPedido() {
            console.log('=== FECHANDO DRAWER ===');
            drawerIsOpen = false;
            const drawer = document.getElementById('drawerDetalhesPedido');
            if (drawer) {
                drawer.style.display = 'none';
                console.log('Drawer fechado. drawerIsOpen:', drawerIsOpen);
            }
        }

        // Event listeners para abrir drawer ao clicar nas linhas da tabela
        document.addEventListener('DOMContentLoaded', function() {
            // Linhas da tabela
            const tableRows = document.querySelectorAll('.pedido-row');
            console.log('Linhas da tabela encontradas:', tableRows.length);
            tableRows.forEach(row => {
                row.addEventListener('click', function(e) {
                    console.log('Clique na linha detectado');
                    // Prevenir abertura se clicar em um link ou botão
                    if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON' || e.target.closest('a') || e.target.closest('button')) {
                        console.log('Clique ignorado (link ou botão)');
                        return;
                    }
                    const pedidoData = extractDataFromTableRow(this);
                    if (pedidoData) {
                        openDetalhesPedido(pedidoData);
                    } else {
                        console.error('Não foi possível extrair dados da linha');
                    }
                });
            });

            // Cards do Kanban
            const pedidoCards = document.querySelectorAll('.pedido-card:not(.pedido-card-empty)');
            pedidoCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    // Prevenir abertura se clicar em um link ou botão
                    if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON' || e.target.closest('a') || e.target.closest('button')) {
                        return;
                    }
                    const pedidoData = extractDataFromCard(this);
                    if (pedidoData) {
                        openDetalhesPedido(pedidoData);
                    }
                });
            });

            // Botão fechar do drawer
            const drawerClose = document.querySelector('#drawerDetalhesPedido .drawer-close');
            if (drawerClose) {
                drawerClose.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Fechando drawer via botão X');
                    closeDetalhesPedido();
                });
            }

            // Fechar ao clicar no overlay (mas não se clicar em um card/linha)
            const drawerOverlay = document.getElementById('drawerDetalhesPedido');
            if (drawerOverlay) {
                drawerOverlay.addEventListener('click', function(e) {
                    // Verificar se o clique foi em um card ou linha
                    const clickedCard = e.target.closest('.pedido-card');
                    const clickedRow = e.target.closest('.pedido-row');

                    // Se clicou em um card ou linha, não fazer nada (o event listener do card/linha vai cuidar)
                    if (clickedCard || clickedRow) {
                        console.log('Clique em card/linha detectado, mantendo drawer aberto');
                        return;
                    }

                    // Se clicou diretamente no overlay (não em seus filhos)
                    if (e.target === drawerOverlay) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Fechando drawer via overlay');
                        closeDetalhesPedido();
                    }
                });
            }

            // Controle das tabs
            const drawerTabs = document.querySelectorAll('#drawerDetalhesPedido .drawer-tab');
            drawerTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');

                    // Remover active de todas as tabs
                    drawerTabs.forEach(t => t.classList.remove('active'));
                    // Adicionar active na tab clicada
                    this.classList.add('active');

                    // Esconder todos os conteúdos
                    const tabContents = document.querySelectorAll('#drawerDetalhesPedido .drawer-tab-content');
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Mostrar o conteúdo da tab ativa
                    const activeContent = document.querySelector(`#drawerDetalhesPedido .drawer-tab-content[data-tab-content="${tabName}"]`);
                    if (activeContent) {
                        activeContent.classList.add('active');
                    }
                });
            });

            // Botão Cancelar
            const btnCancelar = document.querySelector('#drawerDetalhesPedido .btn-cancelar');
            if (btnCancelar) {
                btnCancelar.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Fechando drawer via botão Cancelar');
                    closeDetalhesPedido();
                });
            }

            console.log('✅ Drawer de detalhes do pedido configurado');
            console.log('Total de event listeners adicionados:');
            console.log('- Linhas da tabela:', tableRows.length);
            console.log('- Cards do Kanban:', pedidoCards.length);
        });

        // ========================================
        // MODAL PLANEJAR ITEM
        // ========================================

        // Função para abrir o modal de planejamento
        function openModalPlanejar() {
            const modal = document.getElementById('modalPlanejarItem');
            if (modal) {
                modal.style.display = 'flex';
                // Reinicializar ícones do Lucide
                setTimeout(() => {
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                    }
                }, 100);
            }
        }

        // Função para fechar o modal de planejamento
        function closeModalPlanejar() {
            const modal = document.getElementById('modalPlanejarItem');
            if (modal) {
                modal.style.display = 'none';
                // Limpar formulário
                document.getElementById('tipoAtendimento').value = '';
                document.getElementById('quantidadePlanejar').value = '';
                document.getElementById('dataSemeio').value = '';
            }
        }

        // Event listeners para o modal de planejamento
        document.addEventListener('DOMContentLoaded', function() {
            // Botões "Planejar" dentro do drawer
            const btnsPlanejar = document.querySelectorAll('#drawerDetalhesPedido .btn-planejar');
            btnsPlanejar.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    openModalPlanejar();
                });
            });

            // Botão fechar do modal
            const modalClose = document.querySelector('#modalPlanejarItem .modal-close');
            if (modalClose) {
                modalClose.addEventListener('click', closeModalPlanejar);
            }

            // Fechar ao clicar no overlay
            const modalOverlay = document.getElementById('modalPlanejarItem');
            if (modalOverlay) {
                modalOverlay.addEventListener('click', function(e) {
                    if (e.target === modalOverlay) {
                        closeModalPlanejar();
                    }
                });
            }

            // Botão Cancelar
            const btnCancelar = document.getElementById('btnCancelarPlanejar');
            if (btnCancelar) {
                btnCancelar.addEventListener('click', closeModalPlanejar);
            }

            // Botão Confirmar e Gerar OP
            const btnConfirmar = document.getElementById('btnConfirmarPlanejar');
            if (btnConfirmar) {
                btnConfirmar.addEventListener('click', function() {
                    const tipo = document.getElementById('tipoAtendimento').value;
                    const quantidade = document.getElementById('quantidadePlanejar').value;
                    const data = document.getElementById('dataSemeio').value;

                    if (!tipo || !quantidade || !data) {
                        alert('Por favor, preencha todos os campos.');
                        return;
                    }

                    // Aqui você pode adicionar a lógica para gerar a OP
                    console.log('Gerar OP:', { tipo, quantidade, data });

                    // Fechar modal
                    closeModalPlanejar();

                    // Mostrar mensagem de sucesso
                    alert('OP gerada com sucesso!');
                });
            }

            console.log('✅ Modal de planejamento configurado');
        });

        // ===== MODAL CANCELAR PEDIDO =====
        const modalCancelar = document.getElementById('modalCancelarPedido');
        const btnCancelarPedido = document.querySelector('.btn-cancelar-pedido');
        const btnFecharCancelar = document.getElementById('btnFecharCancelar');
        const btnCancelarModalCancelar = document.getElementById('btnCancelarModalCancelar');
        const btnConfirmarCancelamento = document.getElementById('btnConfirmarCancelamento');

        // Função para abrir modal de cancelamento
        function openModalCancelar() {
            if (modalCancelar) {
                modalCancelar.style.display = 'flex';
                // Re-inicializar ícones do Lucide
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
        }

        // Função para fechar modal de cancelamento
        function closeModalCancelar() {
            if (modalCancelar) {
                modalCancelar.style.display = 'none';
            }
        }

        // Abrir modal ao clicar no botão "Cancelar Pedido"
        if (btnCancelarPedido) {
            btnCancelarPedido.addEventListener('click', function() {
                openModalCancelar();
            });
        }

        // Fechar modal ao clicar no X
        if (btnFecharCancelar) {
            btnFecharCancelar.addEventListener('click', function() {
                closeModalCancelar();
            });
        }

        // Fechar modal ao clicar no botão "Cancelar"
        if (btnCancelarModalCancelar) {
            btnCancelarModalCancelar.addEventListener('click', function() {
                closeModalCancelar();
            });
        }

        // Fechar modal ao clicar fora
        if (modalCancelar) {
            modalCancelar.addEventListener('click', function(e) {
                if (e.target === modalCancelar) {
                    closeModalCancelar();
                }
            });
        }

        // Confirmar cancelamento
        if (btnConfirmarCancelamento) {
            btnConfirmarCancelamento.addEventListener('click', function() {
                // Coletar valores dos inputs
                const inputs = document.querySelectorAll('.cancelar-input');
                const quantidades = [];

                inputs.forEach(input => {
                    const valor = parseInt(input.value) || 0;
                    if (valor > 0) {
                        quantidades.push(valor);
                    }
                });

                if (quantidades.length === 0) {
                    alert('Por favor, informe a quantidade a cancelar para pelo menos um item.');
                    return;
                }

                // Aqui você pode adicionar a lógica para processar o cancelamento
                console.log('Cancelar itens:', quantidades);

                // Fechar modal
                closeModalCancelar();

                // Mostrar mensagem de sucesso
                alert('Itens cancelados com sucesso!');

                // Limpar inputs
                inputs.forEach(input => {
                    input.value = '0';
                });
            });
        }

        console.log('✅ Modal de cancelamento configurado');
    </script>

    <!-- Sidebar Menu Script -->
    <script src="scripts/sidebar-menu.js"></script>
</body>
</html>
